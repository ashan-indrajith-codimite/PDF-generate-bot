name: PR Opened Notification to Slack

on:
  pull_request:
    types: [opened,updated]

jobs:
  notify-slack:
    runs-on: ubuntu-latest

    steps:
      - name: Send PR info to Slack
        run: |
          curl -X POST -H 'Content-type: application/json' \
          --data "{
            \"text\": \"*PR:* `${PR_TITLE}`- `${GITHUB_ACTOR}`\n*URL:* ${PR_URL}\n*Branch:* \`${PR_BASE}\` ‚Üê \`${PR_HEAD}\`\n*Reviews:* ${SLACK_REVIEWERS}\"
          }" $SLACK_WEBHOOK_URL
        env:
          SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
          SLACK_REVIEWERS: ${{ secrets.SLACK_REVIEWERS }}
          PR_TITLE: ${{ github.event.pull_request.title }}
          PR_URL: ${{ github.event.pull_request.html_url }}
          PR_BASE: ${{ github.event.pull_request.base.ref }}
          PR_HEAD: ${{ github.event.pull_request.head.ref }}
          GITHUB_ACTOR: ${{ github.actor }}
